# Amazon Bedrock Flows でブログを生成するワークフローを作成してみよう

* このワークでは、Amazon Bedrock Flows のワークフローを作成します。


![概要](images/overview-s3vectors.png)

---
## 準備

* インストラクターが指定した環境で AWS マネジメントコンソールにサインインして下さい。
    - **このワークの環境は、ワークを実施する時間帯のみ使用可能です。**
* AWS マネジメントコンソールにサインインして、**講師より指定されたリージョン**を選択した状態にしてください。
* ご自分に割り当てられた **2桁の番号**を覚えておいてください。

---
## 1. ブログ記事を生成するまでのフローの作成

1. 左側メニューから [構築] - [フロー] を選択

1. [フローを作成] を選択

1. 名前に `blog-publish-flow` と入力

1. [フローを作成] を選択

1. デフォルトで3つのノードが線でつながっている状態

1. 既存の線を選択して Deleteキーで削除

1. Promptsノードをクリック

1. 左側で、ノード名に `createBlog` と入力 

1. モデルを選択で、Amazon Nova Lite を選択

1. メッセージに以下を入力

    - ```
      旅行の情報を発信するブログ記事を作成します。
      旅行の行先として、{{dest}} の観光名所を {{count}}箇所を挙げ、それぞれについて簡単にその魅力を説明するブログ記事を日本語で作成し、マークダウン形式で出力して下さい。
      ```

1. 推論の設定で長さを `4096`に変更

1. キャンバスで、Prompts ノードの dest と count の左横の丸を、Flow Inputノードの丸にドラッグアンドドロップでつなげる

1. キャンバスで、Flow Inputノードを選択

1. 左側で、出力のタイプを Object に変更

1. キャンバスで、Prompts ノードを選択

1. 左側で、入力を展開表示

1. dest の式を下記を `$.data.dest` に変更

1. count のタイプを Numberに変更

1. count の式を下記を `$.data.count` に変更

1. キャンバスで、Prompts ノードの Output の右横の丸を、Flow output ノードの丸にドラッグアンドドロップでつなげる

1. [保存] を選択し、正常に保存できることを確認

1. フローをテストで以下を入力して Enter キーを押下
    - `{"dest":"京都", "count": 5}`

1. マークダウン形式でブログ記事が生成されることを確認

---
## 2. フローを編集して生成したブログ記事を Amazon S3 バケットに保存する


